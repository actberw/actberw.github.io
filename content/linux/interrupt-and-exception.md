Title: 异常和中断

Asynchronous       Synchronous
interrupt          exception

Hardware interrupt Software interrupt

- Synchronous interrupts are produced by the CPU control unit while executing
instructions and are called synchronous because the control unit issues them
only after terminating the execution of an instruction.

- Asynchronous interrupts are generated by other hardware devices at arbitrary
times with respect to the CPU clock signals.

Intel microprocessor manuals designate synchronous and asynchronous interrupts as exceptions and interrupts, respectively. 

Exceptions, on the other hand, are caused either by programming errors or by anomalous conditions that must be handled by the kernel. In the first case, the kernel handles the exception by delivering to the current process one of the signals familiar to every Unix programmer. In the second case, the kernel performs all the steps needed to recover from the anomalous condition, such as a Page Fault or a requestvia an assembly language instruction such as int or sysenter for a kernel service.

Exceptions 分类:

- Processor-detected exceptions(Generated when the CPU detects an anomalous condition while executing an instruction. These are further divided into three groups, depending on the value of the eip register that is saved on the Kernel Mode stack when the CPU control unit raises the exception.)
    - faults, The saved value of eip is the address of the instruction that caused the fault,
    - Traps, The saved value of eip is the address of the instruction that should be executed after the one that caused the trap. 
    - Aborts, A serious error occurred; the control unit is in trouble, and it may be unable to store in the eip register the precise location of the instruction causing the exception. 

- Programmed exceptions(Occur at the request of the programmer.), They are triggered by int or int3 instructions; the into (check for overflow) and bound (check on address bound) instructions also give rise to a programmed exception when the condition they are checking is not true. Programmed exceptions are handled by the control unit as traps; they are often called `software interrupts`.


## IDT
IDT(Interrupt descriptor table, idt register)

The IDT entries are called gates. 

- Task gate
- Interrupt gate
- Trap gate

Each interrupt or exception is identified by a number ranging from 0 to 255;Intel calls this 8-bit unsigned number a vector.

## PIC
PIC(Programmable Interrupt Controller), APIC

## softIRQ

软中断(softIRQ)是内核提供的一种延迟执行机制
We mentioned earlier in the section "Interrupt Handling" that several tasks among those executed by the kernel are not critical: they can be deferred for a long period of time, if necessary. Remember that the interrupt service routines of an interrupt handler are serialized, and often there should be no occurrence of an interrupt until the corresponding interrupt handler has terminated. Conversely, the deferrable tasks can execute with all interrupts enabled. Taking them out of the interrupt handler helps keep kernel response time small. This is a very important property for many time-critical applications that expect their interrupt requests to be serviced in a few milliseconds.
Linux 2.6 answers such a challenge by using two kinds of non-urgent interruptible kernel functions: the so-called deferrable functions[*] (softirqs and tasklets ), and those executed by means of some work queues (we will describe them in the section "Work Queues" later in this chapter).
[*] These are also called software interrupts, but we denote them as "deferrable functions" to avoid confusion with programmed exceptions, which are referred to as "software interrupts " in Intel manuals.

`cat /proc/interrupts`

refer:

- [http://stackoverflow.com/questions/3425085/the-difference-between-call-gate-interrupt-gate-trap-gate](http://stackoverflow.com/questions/3425085/the-difference-between-call-gate-interrupt-gate-trap-gate)
- [http://linux.linti.unlp.edu.ar/images/0/0c/ULK3-CAPITULO4-UNNOBA.pdf](http://linux.linti.unlp.edu.ar/images/0/0c/ULK3-CAPITULO4-UNNOBA.pdf)
- [http://wiki.osdev.org/Interrupt_Descriptor_Table](http://wiki.osdev.org/Interrupt_Descriptor_Table)
- [http://wiki.osdev.org/Exceptions](http://wiki.osdev.org/Exceptions)
