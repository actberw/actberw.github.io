<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />

    <title>特殊方法的查找</title>

    <link rel="stylesheet" href="../../theme/css/normalize.css" />
    <link rel="stylesheet" href="../../theme/css/foundation.min.css" />
    <link rel="stylesheet" href="../../theme/css/style.css" />
    <link rel="stylesheet" href="../../theme/css/pygments.css" />	
    <script src="../../theme/js/vendor/custom.modernizr.js"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        "HTML-CSS": {
      styles: {
        ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
          },
            tex2jax: {inlineMath: [['$','$'], ['\\\\(','\\\\)']],processEscapes: true}
      });
    </script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></script>
</head>

<body>

<!-- Nav Bar -->
<nav>
<div class="top-bar">
<div class="row">
    <div class="large-9 large-centered columns">
	    <h1><a href="../..">记录一些工作中的笔记</a></h1>
    </div>
</div>
</div>

<!-- Show menu items and pages -->
<div class="row">
<div class="large-9 columns">
    <ul class="button-group navigation">

    </ul>
</div>
</div>
</nav>
<!-- End Nav -->


<!-- Main Page Content and Sidebar -->
<div class="row">

    <!-- Main Blog Content -->
    <div class="large-9 columns">
<article>
    <header>
        <h3 class="article-title"><a href="../../posts/python/special-method-lookup.html" rel="bookmark"
        title="Permalink to 特殊方法的查找">特殊方法的查找</a></h3>
    </header>

<h6 class="subheader" title="2014-11-03T21:00:00">Mon 03 November 2014
</h6>


    <p>For old-style classes, special methods are always looked up in exactly the same way as any other method or attribute. This is the case regardless of whether the method is being looked up explicitly as in <code>x.__getitem__(i)</code> or implicitly as in <code>x[i]</code>.</p>
<p>For new-style classes, implicit invocations of special methods are only guaranteed to work correctly if defined on an object’s <em>type</em>, not in the object’s instance dictionary.</p>
<div class="highlight"><pre><span class="n">class</span> <span class="n">A</span><span class="p">(</span><span class="n">object</span><span class="p">)</span><span class="o">:</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>


<p>对于上面定义的类A, <code>A.n</code> 实际上调用的是<code>type.__getattribute__</code>, <code>A().n</code>实际调用的是<code>object.__getattribute__</code>(参见<a href="/posts/python/magic-object.html">特性的搜索顺序</a>).</p>
<p>Implicit special method lookup generally also bypasses the _<em>getattribute_</em>() method even of the object’s metaclass.Bypassing the _<em>getattribute_</em>() machinery in this fashion provides significant scope for speed optimisations within the interpreter, at the cost of some flexibility in the handling of special methods</p>
<p>refer:</p>
<ul>
<li>[0]<a href="https://docs.python.org/2/reference/datamodel.html#special-method-lookup-for-new-style-classes">https://docs.python.org/2/reference/datamodel.html#special-method-lookup-for-new-style-classes</a></li>
<li>[1]<a href="http://stackoverflow.com/questions/24150894/what-is-the-difference-between-type-getattribute-and-object-getattribute">http://stackoverflow.com/questions/24150894/what-is-the-difference-between-type-getattribute-and-object-getattribute</a></li>
</ul>
<p class="subheader">Category: <a href="../../category/python.html">python</a>

    Tagged: 
    <a href="../../tag/python.html">python </a>
    <a href="../../tag/method.html">method </a>
</p>




</article>
    </div>
    <!-- End Main Content -->

    <!-- Sidebar -->
    <aside class="large-3 columns">
        <h5 class="sidebar-title">Site</h5>
        <ul class="side-nav">
            <li><a href="../../archives.html">Archives</a>
            <li><a href="../../tags.html">Tags</a>
        </ul>

		
        <h5 class="sidebar-title">Categories</h5>
        <ul class="side-nav">
            <li><a href="../../category/adt.html">adt</a></li>
            <li><a href="../../category/algorithm.html">algorithm</a></li>
            <li><a href="../../category/c.html">c</a></li>
            <li><a href="../../category/complexity.html">complexity</a></li>
            <li><a href="../../category/coroutine.html">coroutine</a></li>
            <li><a href="../../category/interview.html">interview</a></li>
            <li><a href="../../category/learn-plan.html">learn-plan</a></li>
            <li><a href="../../category/misc.html">misc</a></li>
            <li><a href="../../category/mysql.html">mysql</a></li>
            <li><a href="../../category/python.html">python</a></li>
            <li><a href="../../category/security.html">security</a></li>
            <li><a href="../../category/str.html">str</a></li>
            <li><a href="../../category/tcp-ip.html">tcp-ip</a></li>
            <li><a href="../../category/tree.html">tree</a></li>
            <li><a href="../../category/vim.html">vim</a></li>
   
        </ul>

        <h5 class="sidebar-title">Links</h5>
        <ul class="side-nav">
            <li><a href="https://github.com/actberw">github</a></li>
        </ul>
		
        <h5 class="sidebar-title">Social</h5>
        <ul class="side-nav">
            <li><a href="http://weibo.com/u/1950796544">weibo</a></li>
        </ul>

    </aside> <!-- End Sidebar -->

</div> <!-- End Main Content and Sidebar -->


<!-- Footer -->
<footer class="row">
    <div class="large-12 columns">
        <hr />
        <div class="row">
            <div class="large-6 columns">
              <!--                  <p>记录一些工作中的笔记 by actberw</p> -->
            </div>
            </div>
    </div>
</footer>